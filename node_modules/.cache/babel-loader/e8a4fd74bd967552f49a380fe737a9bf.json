{"ast":null,"code":"var _jsxFileName = \"/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/Tictactoe.jsx\";\nimport React from 'react';\nimport Axios from 'axios';\nimport { Button } from 'react-materialize';\n\nconst _require = require('../socket'),\n      ConnectUser = _require.ConnectUser,\n      getOnlineUsers = _require.getOnlineUsers,\n      disconnectSocket = _require.disconnectSocket,\n      socket = _require.socket;\n\nconst _require2 = require('../url'),\n      backendURL = _require2.backendURL;\n\nclass Tictactoe extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOkay: false,\n      users: [],\n      ioId: '',\n      isBusy: false\n    };\n    this.challenge = this.challenge.bind(this);\n  }\n\n  challenge(user) {\n    console.log(user);\n    socket.emit('Challenge', {\n      user,\n      userId: this.state.ioId\n    });\n  }\n\n  async componentDidMount() {\n    Axios.get(\"\".concat(backendURL, \"/isLoggedIn\"), {\n      withCredentials: true\n    }).then(res => {\n      this.setState({\n        ioId: res.data.userId\n      });\n    });\n    socket.on('OnlineUsers', data => {\n      this.setState({\n        users: data.users\n      });\n    });\n    socket.on('ChallengeRequest', data => {\n      console.log(data);\n\n      if (window.confirm(\"\".concat(data.Challenger.name, \" is trying to challeneg,Do you accept?\"))) {\n        socket.emit('ChallengeAccepted', data);\n      } else socket.emit('ChallengeRejected', data);\n    });\n    socket.on('AcceptedChallenge', data => {\n      console.log(data);\n    });\n    socket.on('RejectedChallenge', data => console.log(\"Challenege Rejected \" + data));\n    console.log(this.props.match.params);\n    if (this.props.match.params.game === 'tictactoe') this.setState({\n      isOkay: true\n    });\n    ConnectUser();\n    getOnlineUsers();\n  }\n\n  componentWillUnmount() {\n    disconnectSocket();\n  }\n\n  render() {\n    // console.log(this.state);\n    let connections = [];\n    if (this.state.users.length === 0) connections = React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"\\\"No one is online\\\"\");else {\n      const x = this.state.users.filter(i => {\n        if (i.user_id !== this.state.ioId) return i;\n      }); // console.log(connections)\n\n      connections = x.map(i => {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, i.name), React.createElement(Button, {\n          onClick: () => {\n            this.challenge(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, \"challenge\"));\n      });\n    }\n\n    if (this.state.isOkay) {\n      if (!this.state.isBusy) {\n        return React.createElement(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, connections);\n      }\n    } else {\n      return React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Work is in developement\"));\n    }\n  }\n\n}\n\nexport default Tictactoe;","map":{"version":3,"sources":["/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/Tictactoe.jsx"],"names":["React","Axios","Button","require","ConnectUser","getOnlineUsers","disconnectSocket","socket","backendURL","Tictactoe","Component","constructor","props","state","isOkay","users","ioId","isBusy","challenge","bind","user","console","log","emit","userId","componentDidMount","get","withCredentials","then","res","setState","data","on","window","confirm","Challenger","name","match","params","game","componentWillUnmount","render","connections","length","x","filter","i","user_id","map","textAlign"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,QAAqB,mBAArB;;iBAE2DC,OAAO,CAAC,WAAD,C;MAA3DC,W,YAAAA,W;MAAYC,c,YAAAA,c;MAAeC,gB,YAAAA,gB;MAAiBC,M,YAAAA,M;;kBAChCJ,OAAO,CAAC,QAAD,C;MAAnBK,U,aAAAA,U;;AAGP,MAAMC,SAAN,SAAwBT,KAAK,CAACU,SAA9B,CAAuC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,MAAM,EAAC,KADA;AAEPC,MAAAA,KAAK,EAAC,EAFC;AAGPC,MAAAA,IAAI,EAAC,EAHE;AAIPC,MAAAA,MAAM,EAAC;AAJA,KAAX;AAOA,SAAKC,SAAL,GAAe,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAf;AACH;;AAEDD,EAAAA,SAAS,CAACE,IAAD,EAAM;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAb,IAAAA,MAAM,CAACgB,IAAP,CAAY,WAAZ,EAAwB;AAACH,MAAAA,IAAD;AAAMI,MAAAA,MAAM,EAAC,KAAKX,KAAL,CAAWG;AAAxB,KAAxB;AACH;;AAED,QAAMS,iBAAN,GAAyB;AACrBxB,IAAAA,KAAK,CAACyB,GAAN,WAAalB,UAAb,kBAAqC;AAACmB,MAAAA,eAAe,EAAC;AAAjB,KAArC,EAA6DC,IAA7D,CAAkEC,GAAG,IAAE;AACnE,WAAKC,QAAL,CAAc;AAACd,QAAAA,IAAI,EAACa,GAAG,CAACE,IAAJ,CAASP;AAAf,OAAd;AACH,KAFD;AAGAjB,IAAAA,MAAM,CAACyB,EAAP,CAAU,aAAV,EAAwBD,IAAI,IAAE;AAAC,WAAKD,QAAL,CAAc;AAACf,QAAAA,KAAK,EAACgB,IAAI,CAAChB;AAAZ,OAAd;AAAkC,KAAjE;AACAR,IAAAA,MAAM,CAACyB,EAAP,CAAU,kBAAV,EAA6BD,IAAI,IAAE;AAC/BV,MAAAA,OAAO,CAACC,GAAR,CAAYS,IAAZ;;AACA,UAAGE,MAAM,CAACC,OAAP,WAAkBH,IAAI,CAACI,UAAL,CAAgBC,IAAlC,4CAAH,EAAmF;AAC/E7B,QAAAA,MAAM,CAACgB,IAAP,CAAY,mBAAZ,EAAgCQ,IAAhC;AACH,OAFD,MAIIxB,MAAM,CAACgB,IAAP,CAAY,mBAAZ,EAAgCQ,IAAhC;AACP,KAPD;AAQAxB,IAAAA,MAAM,CAACyB,EAAP,CAAU,mBAAV,EAA8BD,IAAI,IAAE;AAChCV,MAAAA,OAAO,CAACC,GAAR,CAAYS,IAAZ;AACH,KAFD;AAGAxB,IAAAA,MAAM,CAACyB,EAAP,CAAU,mBAAV,EAA8BD,IAAI,IAAEV,OAAO,CAACC,GAAR,CAAY,yBAAuBS,IAAnC,CAApC;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKV,KAAL,CAAWyB,KAAX,CAAiBC,MAA7B;AACA,QAAG,KAAK1B,KAAL,CAAWyB,KAAX,CAAiBC,MAAjB,CAAwBC,IAAxB,KAA+B,WAAlC,EACI,KAAKT,QAAL,CAAc;AAAChB,MAAAA,MAAM,EAAC;AAAR,KAAd;AACJV,IAAAA,WAAW;AACXC,IAAAA,cAAc;AACjB;;AACDmC,EAAAA,oBAAoB,GAAE;AAClBlC,IAAAA,gBAAgB;AACnB;;AAEDmC,EAAAA,MAAM,GAAE;AACJ;AACA,QAAIC,WAAW,GAAC,EAAhB;AACA,QAAG,KAAK7B,KAAL,CAAWE,KAAX,CAAiB4B,MAAjB,KAA0B,CAA7B,EACID,WAAW,GAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAZ,CADJ,KAEI;AACA,YAAME,CAAC,GAAC,KAAK/B,KAAL,CAAWE,KAAX,CAAiB8B,MAAjB,CAAwBC,CAAC,IAAE;AAChC,YAAGA,CAAC,CAACC,OAAF,KAAY,KAAKlC,KAAL,CAAWG,IAA1B,EACK,OACG8B,CADH;AAGP,OALO,CAAR,CADA,CAOA;;AACAJ,MAAAA,WAAW,GAACE,CAAC,CAACI,GAAF,CAAMF,CAAC,IAAE;AACjB,eAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKA,CAAC,CAACV,IAAP,CADG,EAEH,oBAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,MAAI;AAAC,iBAAKlB,SAAL,CAAe4B,CAAf;AAAkB,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFG,CAAP;AAIH,OALW,CAAZ;AAMH;;AACD,QAAG,KAAKjC,KAAL,CAAWC,MAAd,EAAqB;AACjB,UAAG,CAAC,KAAKD,KAAL,CAAWI,MAAf,EAAsB;AAClB,eACI;AAAK,UAAA,KAAK,EAAE;AAACgC,YAAAA,SAAS,EAAC;AAAX,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKP,WADL,CADJ;AAKH;AACR,KARG,MASA;AACA,aACI;AAAK,QAAA,KAAK,EAAE;AAACO,UAAAA,SAAS,EAAC;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADJ,CADJ;AAKH;AACJ;;AAjFsC;;AAqFvC,eAAexC,SAAf","sourcesContent":["import React from 'react';\nimport Axios from 'axios';\nimport {Button} from 'react-materialize'\n\nconst {ConnectUser,getOnlineUsers,disconnectSocket,socket}=require('../socket');\nconst {backendURL}=require('../url');\n\n\nclass Tictactoe extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            isOkay:false,\n            users:[],\n            ioId:'',\n            isBusy:false\n        };\n\n        this.challenge=this.challenge.bind(this);\n    }\n\n    challenge(user){\n        console.log(user);\n        socket.emit('Challenge',{user,userId:this.state.ioId});\n    }\n\n    async componentDidMount(){\n        Axios.get(`${backendURL}/isLoggedIn`,{withCredentials:true}).then(res=>{\n            this.setState({ioId:res.data.userId});\n        })\n        socket.on('OnlineUsers',data=>{this.setState({users:data.users})});\n        socket.on('ChallengeRequest',data=>{\n            console.log(data);\n            if(window.confirm(`${data.Challenger.name} is trying to challeneg,Do you accept?`)){\n                socket.emit('ChallengeAccepted',data);\n            }\n            else\n                socket.emit('ChallengeRejected',data);\n        });\n        socket.on('AcceptedChallenge',data=>{\n            console.log(data);\n        });\n        socket.on('RejectedChallenge',data=>console.log(\"Challenege Rejected \"+data))\n        console.log(this.props.match.params);\n        if(this.props.match.params.game==='tictactoe')\n            this.setState({isOkay:true});\n        ConnectUser();\n        getOnlineUsers();\n    }\n    componentWillUnmount(){\n        disconnectSocket();\n    }\n\n    render(){\n        // console.log(this.state);\n        let connections=[];\n        if(this.state.users.length===0)\n            connections=<h4>\"No one is online\"</h4>;\n        else{\n            const x=this.state.users.filter(i=>{\n               if(i.user_id!==this.state.ioId)\n                    return(\n                       i\n                    )\n            });\n            // console.log(connections)\n            connections=x.map(i=>{\n                return(<div>\n                    <h1>{i.name}</h1>\n                    <Button onClick={()=>{this.challenge(i)}}>challenge</Button>\n                </div>);\n            })\n        }\n        if(this.state.isOkay){\n            if(!this.state.isBusy){\n                return(\n                    <div style={{textAlign:'center'}}>\n                        {connections}\n                    </div>\n                )\n            }\n    }\n    else{\n        return(\n            <div style={{textAlign:'center'}}>\n                <h1>Work is in developement</h1>\n            </div>\n        );\n    }\n}\n    \n}\n\nexport default Tictactoe;"]},"metadata":{},"sourceType":"module"}