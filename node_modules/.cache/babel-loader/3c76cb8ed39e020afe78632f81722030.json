{"ast":null,"code":"var _jsxFileName = \"/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/TTT.jsx\";\nimport React from 'react';\nimport './tic.css';\n\nconst _require = require('../socket'),\n      socket = _require.socket;\n\nclass TTT extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      a: null,\n      OpponentConnected: true,\n      Result: {\n        Winner: '',\n        Looser: '',\n        isFinished: false,\n        isDraw: false\n      },\n      myChance: false,\n      hasClicked: false\n    };\n    this.clicked = this.clicked.bind(this);\n    this.hasWon = this.hasWon.bind(this);\n    this.isDraw = this.isDraw.bind(this);\n    console.log(this.props.info);\n  }\n\n  isDraw(id, sign) {\n    var x = this.state.a;\n    x[id[0]][id[1]] = sign;\n    var flag = 0;\n\n    for (var i = 0; i < 3; i++) {\n      for (var j = 0; j < 3; j++) if (x[i][j] === 0) flag = 1;\n    }\n\n    if (flag === 1) return false;else return true;\n  }\n\n  hasWon(id, sign) {\n    return new Promise((resolve, reject) => {\n      let i = id[0];\n      let j = id[1];\n      let x = this.state.a;\n      x[i][j] = sign;\n      var c = 0;\n\n      for (c = 0; c < 3; c++) {\n        if (x[i][c] !== sign) break;\n      }\n\n      if (c === 3) resolve(true);\n\n      for (c = 0; c < 3; c++) {\n        if (x[c][j] !== sign) break;\n      }\n\n      if (c === 3) resolve(true);\n\n      for (c = 0; c < 3; c++) {\n        if (x[c][c] !== sign) break;\n      }\n\n      if (c === 3) resolve(true);\n\n      for (c = 0; c < 3; c++) {\n        if (x[c][2 - c] !== sign) break;\n      }\n\n      if (c === 3) resolve(true);\n      resolve(false);\n    });\n  }\n\n  async clicked(event) {\n    var id = event.target.id;\n\n    if (this.state.myChance) {\n      var x = this.state.a;\n      console.log(x);\n\n      if (x[event.target.id[0]][event.target.id[1]] === 0) {\n        if (this.props.info.sign === 'x') socket.emit('MoveByMe', {\n          block: event.target.id,\n          room: this.props.info.room,\n          Challenger: this.props.info.Challenger,\n          sign: 'x'\n        });else socket.emit('MoveByMe', {\n          block: event.target.id,\n          room: this.props.info.room,\n          Challenger: this.props.info.Challenger,\n          sign: 'o'\n        });\n        let x = this.state.a;\n        x[event.target.id[0]][event.target.id[1]] = this.props.info.sign;\n        document.getElementById(event.target.id).innerHTML = this.props.info.sign;\n        this.setState({\n          a: x,\n          myChance: false\n        });\n        let result = await this.hasWon(event.target.id, this.props.info.sign);\n        console.log(result);\n        if (result) this.setState({\n          Result: {\n            Winner: this.props.info.me,\n            Looser: this.props.info.Challenger,\n            isFinished: true,\n            isDraw: false\n          }\n        });\n        let r1 = await this.isDraw(id, this.props.info.sign);\n\n        if (r1) {\n          this.setState({\n            Result: {\n              Winner: '',\n              Looser: '',\n              isFinished: true,\n              isDraw: true\n            }\n          });\n        }\n      } else alert('Place is already Occupied!');\n    } else alert('Its your opponents turns!');\n  }\n\n  componentDidMount() {\n    socket.emit('InGame', {\n      room: this.props.info.sign\n    });\n    socket.on('OppoDeactive', data => {\n      console.log(\"data\");\n      this.setState({\n        OpponentConnected: false\n      });\n    });\n    socket.on('OpponentActive', data => {\n      console.log(\"data\");\n      this.setState({\n        OpponentConnected: true\n      });\n    });\n    var x = new Array(3);\n\n    for (var i = 0; i < 3; i++) {\n      x[i] = new Array(3);\n\n      for (var j = 0; j < 3; j++) x[i][j] = 0;\n    }\n\n    if (this.props.info.sign === 'x') this.setState({\n      myChance: true\n    });\n    this.setState({\n      a: x\n    });\n    console.log(this.props.info);\n    socket.on('MoveFromOpp', async data => {\n      //    console.log(data);\n      let result = await this.hasWon(data.block, data.sign);\n      console.log(result);\n      let r1 = await this.isDraw(data.block, data.sign);\n      if (r1) this.setState({\n        Result: {\n          Winner: '',\n          Looser: '',\n          isFinished: true,\n          isDraw: true\n        }\n      });else if (result) this.setState({\n        Result: {\n          Winner: this.props.info.Challenger,\n          Looser: this.props.info.me,\n          isFinished: true,\n          isDraw: false\n        }\n      });else {\n        let x = this.state.a;\n        x[data.block[0]][data.block[1]] = data.sign;\n        document.getElementById(data.block).innerHTML = data.sign;\n        this.setState({\n          a: x,\n          myChance: true\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    socket.emit('DisconnectFromGame', {\n      room: this.props.info.room,\n      userId: this.props.info.me.user_id\n    });\n  }\n\n  render() {\n    console.log(this.state.a);\n\n    if (this.state.OpponentConnected) {\n      if (!this.state.Result.isFinished) {\n        return React.createElement(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, \"You are up against \", this.props.info.Challenger.name), React.createElement(\"table\", {\n          id: \"board\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          id: \"00\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          id: \"01\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          id: \"02\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        })), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          id: \"10\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          id: \"11\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          id: \"12\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        })), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          id: \"20\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          id: \"21\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          id: \"22\",\n          onClick: this.clicked,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }))), React.createElement(\"h3\", {\n          style: {\n            color: 'green'\n          },\n          hidden: !this.state.myChance,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, \"Your Chance\"), React.createElement(\"h3\", {\n          style: {\n            color: 'red'\n          },\n          hidden: this.state.myChance,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, \"Your Opponents turn\"));\n      } else {\n        if (this.state.Result.isDraw) {\n          return React.createElement(\"div\", {\n            style: {\n              textAlign: 'center'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184\n            },\n            __self: this\n          }, React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 185\n            },\n            __self: this\n          }, \"Well played! You had a draw\"));\n        } else if (this.state.Result.Winner.user_id === this.props.info.Challenger.user_id) {\n          return React.createElement(\"div\", {\n            style: {\n              textAlign: false\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 192\n            },\n            __self: this\n          }, React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 193\n            },\n            __self: this\n          }, \"Better Luck Next Time brother!\"));\n        } else {\n          return React.createElement(\"div\", {\n            style: {\n              textAlign: false\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 200\n            },\n            __self: this\n          }, \"Congrats bro you won!\"));\n        }\n      }\n    } else {\n      return React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Your Opponent has fled the arena!\"));\n    }\n  }\n\n}\n\nexport default TTT;","map":{"version":3,"sources":["/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/TTT.jsx"],"names":["React","require","socket","TTT","Component","constructor","props","state","a","OpponentConnected","Result","Winner","Looser","isFinished","isDraw","myChance","hasClicked","clicked","bind","hasWon","console","log","info","id","sign","x","flag","i","j","Promise","resolve","reject","c","event","target","emit","block","room","Challenger","document","getElementById","innerHTML","setState","result","me","r1","alert","componentDidMount","on","data","Array","componentWillUnmount","userId","user_id","render","textAlign","name","color"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;;iBAEeC,OAAO,CAAC,WAAD,C;MAAfC,M,YAAAA,M;;AAEP,MAAMC,GAAN,SAAkBH,KAAK,CAACI,SAAxB,CAAiC;AAC7BC,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,CAAC,EAAC,IADK;AAEPC,MAAAA,iBAAiB,EAAC,IAFX;AAGPC,MAAAA,MAAM,EAAC;AAACC,QAAAA,MAAM,EAAC,EAAR;AAAWC,QAAAA,MAAM,EAAC,EAAlB;AAAqBC,QAAAA,UAAU,EAAC,KAAhC;AAAsCC,QAAAA,MAAM,EAAC;AAA7C,OAHA;AAIPC,MAAAA,QAAQ,EAAC,KAJF;AAKPC,MAAAA,UAAU,EAAC;AALJ,KAAX;AAOA,SAAKC,OAAL,GAAa,KAAKA,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAb;AACA,SAAKC,MAAL,GAAY,KAAKA,MAAL,CAAYD,IAAZ,CAAiB,IAAjB,CAAZ;AACA,SAAKJ,MAAL,GAAY,KAAKA,MAAL,CAAYI,IAAZ,CAAiB,IAAjB,CAAZ;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKf,KAAL,CAAWgB,IAAvB;AACH;;AAEDR,EAAAA,MAAM,CAACS,EAAD,EAAIC,IAAJ,EAAS;AACX,QAAIC,CAAC,GAAC,KAAKlB,KAAL,CAAWC,CAAjB;AACAiB,IAAAA,CAAC,CAACF,EAAE,CAAC,CAAD,CAAH,CAAD,CAASA,EAAE,CAAC,CAAD,CAAX,IAAgBC,IAAhB;AACA,QAAIE,IAAI,GAAC,CAAT;;AACA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,CAAd,EAAgBA,CAAC,EAAjB,EAAoB;AAChB,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,CAAd,EAAgBA,CAAC,EAAjB,EACI,IAAGH,CAAC,CAACE,CAAD,CAAD,CAAKC,CAAL,MAAU,CAAb,EACIF,IAAI,GAAC,CAAL;AACX;;AACD,QAAGA,IAAI,KAAG,CAAV,EACI,OAAO,KAAP,CADJ,KAGI,OAAO,IAAP;AACP;;AAEDP,EAAAA,MAAM,CAACI,EAAD,EAAIC,IAAJ,EAAS;AACX,WAAO,IAAIK,OAAJ,CAAY,CAACC,OAAD,EAASC,MAAT,KAAkB;AACjC,UAAIJ,CAAC,GAACJ,EAAE,CAAC,CAAD,CAAR;AACA,UAAIK,CAAC,GAACL,EAAE,CAAC,CAAD,CAAR;AACA,UAAIE,CAAC,GAAC,KAAKlB,KAAL,CAAWC,CAAjB;AACAiB,MAAAA,CAAC,CAACE,CAAD,CAAD,CAAKC,CAAL,IAAQJ,IAAR;AACA,UAAIQ,CAAC,GAAC,CAAN;;AACA,WAAIA,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC,CAAV,EAAYA,CAAC,EAAb,EAAgB;AACZ,YAAGP,CAAC,CAACE,CAAD,CAAD,CAAKK,CAAL,MAAUR,IAAb,EACI;AACP;;AACD,UAAGQ,CAAC,KAAG,CAAP,EACIF,OAAO,CAAC,IAAD,CAAP;;AACJ,WAAIE,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC,CAAV,EAAYA,CAAC,EAAb,EAAgB;AACZ,YAAGP,CAAC,CAACO,CAAD,CAAD,CAAKJ,CAAL,MAAUJ,IAAb,EACI;AACP;;AACD,UAAGQ,CAAC,KAAG,CAAP,EACAF,OAAO,CAAC,IAAD,CAAP;;AACA,WAAIE,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC,CAAV,EAAYA,CAAC,EAAb,EAAgB;AACZ,YAAGP,CAAC,CAACO,CAAD,CAAD,CAAKA,CAAL,MAAUR,IAAb,EACI;AACP;;AAED,UAAGQ,CAAC,KAAG,CAAP,EACIF,OAAO,CAAC,IAAD,CAAP;;AACJ,WAAIE,CAAC,GAAC,CAAN,EAAQA,CAAC,GAAC,CAAV,EAAYA,CAAC,EAAb,EAAgB;AACZ,YAAGP,CAAC,CAACO,CAAD,CAAD,CAAK,IAAEA,CAAP,MAAYR,IAAf,EACI;AACP;;AACD,UAAGQ,CAAC,KAAG,CAAP,EACIF,OAAO,CAAC,IAAD,CAAP;AACJA,MAAAA,OAAO,CAAC,KAAD,CAAP;AACH,KAhCM,CAAP;AAkCH;;AAGD,QAAMb,OAAN,CAAcgB,KAAd,EAAoB;AAChB,QAAIV,EAAE,GAACU,KAAK,CAACC,MAAN,CAAaX,EAApB;;AACA,QAAG,KAAKhB,KAAL,CAAWQ,QAAd,EAAuB;AACf,UAAIU,CAAC,GAAC,KAAKlB,KAAL,CAAWC,CAAjB;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAYI,CAAZ;;AACA,UAAGA,CAAC,CAACQ,KAAK,CAACC,MAAN,CAAaX,EAAb,CAAgB,CAAhB,CAAD,CAAD,CAAsBU,KAAK,CAACC,MAAN,CAAaX,EAAb,CAAgB,CAAhB,CAAtB,MAA4C,CAA/C,EAAiD;AAC7C,YAAG,KAAKjB,KAAL,CAAWgB,IAAX,CAAgBE,IAAhB,KAAuB,GAA1B,EACItB,MAAM,CAACiC,IAAP,CAAY,UAAZ,EAAuB;AAACC,UAAAA,KAAK,EAACH,KAAK,CAACC,MAAN,CAAaX,EAApB;AAAuBc,UAAAA,IAAI,EAAC,KAAK/B,KAAL,CAAWgB,IAAX,CAAgBe,IAA5C;AAAiDC,UAAAA,UAAU,EAAC,KAAKhC,KAAL,CAAWgB,IAAX,CAAgBgB,UAA5E;AAAuFd,UAAAA,IAAI,EAAC;AAA5F,SAAvB,EADJ,KAGItB,MAAM,CAACiC,IAAP,CAAY,UAAZ,EAAuB;AAACC,UAAAA,KAAK,EAACH,KAAK,CAACC,MAAN,CAAaX,EAApB;AAAuBc,UAAAA,IAAI,EAAC,KAAK/B,KAAL,CAAWgB,IAAX,CAAgBe,IAA5C;AAAiDC,UAAAA,UAAU,EAAC,KAAKhC,KAAL,CAAWgB,IAAX,CAAgBgB,UAA5E;AAAuFd,UAAAA,IAAI,EAAC;AAA5F,SAAvB;AACJ,YAAIC,CAAC,GAAC,KAAKlB,KAAL,CAAWC,CAAjB;AACAiB,QAAAA,CAAC,CAACQ,KAAK,CAACC,MAAN,CAAaX,EAAb,CAAgB,CAAhB,CAAD,CAAD,CAAsBU,KAAK,CAACC,MAAN,CAAaX,EAAb,CAAgB,CAAhB,CAAtB,IAA0C,KAAKjB,KAAL,CAAWgB,IAAX,CAAgBE,IAA1D;AACAe,QAAAA,QAAQ,CAACC,cAAT,CAAwBP,KAAK,CAACC,MAAN,CAAaX,EAArC,EAAyCkB,SAAzC,GAAmD,KAAKnC,KAAL,CAAWgB,IAAX,CAAgBE,IAAnE;AACA,aAAKkB,QAAL,CAAc;AAAClC,UAAAA,CAAC,EAACiB,CAAH;AAAKV,UAAAA,QAAQ,EAAC;AAAd,SAAd;AACA,YAAI4B,MAAM,GAAC,MAAM,KAAKxB,MAAL,CAAYc,KAAK,CAACC,MAAN,CAAaX,EAAzB,EAA4B,KAAKjB,KAAL,CAAWgB,IAAX,CAAgBE,IAA5C,CAAjB;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAYsB,MAAZ;AACA,YAAGA,MAAH,EACI,KAAKD,QAAL,CAAc;AAAChC,UAAAA,MAAM,EAAC;AAACC,YAAAA,MAAM,EAAC,KAAKL,KAAL,CAAWgB,IAAX,CAAgBsB,EAAxB;AAA2BhC,YAAAA,MAAM,EAAC,KAAKN,KAAL,CAAWgB,IAAX,CAAgBgB,UAAlD;AAA6DzB,YAAAA,UAAU,EAAC,IAAxE;AAA6EC,YAAAA,MAAM,EAAC;AAApF;AAAR,SAAd;AACJ,YAAI+B,EAAE,GAAC,MAAM,KAAK/B,MAAL,CAAYS,EAAZ,EAAe,KAAKjB,KAAL,CAAWgB,IAAX,CAAgBE,IAA/B,CAAb;;AACA,YAAGqB,EAAH,EAAM;AACF,eAAKH,QAAL,CAAc;AAAChC,YAAAA,MAAM,EAAC;AAACC,cAAAA,MAAM,EAAC,EAAR;AAAWC,cAAAA,MAAM,EAAC,EAAlB;AAAqBC,cAAAA,UAAU,EAAC,IAAhC;AAAqCC,cAAAA,MAAM,EAAC;AAA5C;AAAR,WAAd;AACH;AAEJ,OAlBD,MAoBIgC,KAAK,CAAC,4BAAD,CAAL;AACX,KAxBD,MA0BIA,KAAK,CAAC,2BAAD,CAAL;AACP;;AAEDC,EAAAA,iBAAiB,GAAE;AACf7C,IAAAA,MAAM,CAACiC,IAAP,CAAY,QAAZ,EAAqB;AAACE,MAAAA,IAAI,EAAC,KAAK/B,KAAL,CAAWgB,IAAX,CAAgBE;AAAtB,KAArB;AACAtB,IAAAA,MAAM,CAAC8C,EAAP,CAAU,cAAV,EAAyBC,IAAI,IAAE;AAC3B7B,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,WAAKqB,QAAL,CAAc;AAACjC,QAAAA,iBAAiB,EAAC;AAAnB,OAAd;AACH,KAHD;AAIAP,IAAAA,MAAM,CAAC8C,EAAP,CAAU,gBAAV,EAA2BC,IAAI,IAAE;AAC7B7B,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AAEA,WAAKqB,QAAL,CAAc;AAACjC,QAAAA,iBAAiB,EAAC;AAAnB,OAAd;AACH,KAJD;AAMD,QAAIgB,CAAC,GAAC,IAAIyB,KAAJ,CAAU,CAAV,CAAN;;AACA,SAAI,IAAIvB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,CAAd,EAAgBA,CAAC,EAAjB,EAAoB;AAChBF,MAAAA,CAAC,CAACE,CAAD,CAAD,GAAK,IAAIuB,KAAJ,CAAU,CAAV,CAAL;;AACA,WAAI,IAAItB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,CAAd,EAAgBA,CAAC,EAAjB,EACKH,CAAC,CAACE,CAAD,CAAD,CAAKC,CAAL,IAAQ,CAAR;AACR;;AACD,QAAG,KAAKtB,KAAL,CAAWgB,IAAX,CAAgBE,IAAhB,KAAuB,GAA1B,EACK,KAAKkB,QAAL,CAAc;AAAC3B,MAAAA,QAAQ,EAAC;AAAV,KAAd;AACL,SAAK2B,QAAL,CAAc;AAAClC,MAAAA,CAAC,EAACiB;AAAH,KAAd;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKf,KAAL,CAAWgB,IAAvB;AACApB,IAAAA,MAAM,CAAC8C,EAAP,CAAU,aAAV,EAAwB,MAAMC,IAAN,IAAY;AACnC;AACG,UAAIN,MAAM,GAAC,MAAM,KAAKxB,MAAL,CAAY8B,IAAI,CAACb,KAAjB,EAAuBa,IAAI,CAACzB,IAA5B,CAAjB;AACCJ,MAAAA,OAAO,CAACC,GAAR,CAAYsB,MAAZ;AACA,UAAIE,EAAE,GAAC,MAAM,KAAK/B,MAAL,CAAYmC,IAAI,CAACb,KAAjB,EAAuBa,IAAI,CAACzB,IAA5B,CAAb;AACA,UAAGqB,EAAH,EACI,KAAKH,QAAL,CAAc;AAAChC,QAAAA,MAAM,EAAC;AAACC,UAAAA,MAAM,EAAC,EAAR;AAAWC,UAAAA,MAAM,EAAC,EAAlB;AAAqBC,UAAAA,UAAU,EAAC,IAAhC;AAAqCC,UAAAA,MAAM,EAAC;AAA5C;AAAR,OAAd,EADJ,KAEI,IAAG6B,MAAH,EACA,KAAKD,QAAL,CAAc;AAAChC,QAAAA,MAAM,EAAC;AAACC,UAAAA,MAAM,EAAC,KAAKL,KAAL,CAAWgB,IAAX,CAAgBgB,UAAxB;AAAmC1B,UAAAA,MAAM,EAAC,KAAKN,KAAL,CAAWgB,IAAX,CAAgBsB,EAA1D;AAA6D/B,UAAAA,UAAU,EAAC,IAAxE;AAA6EC,UAAAA,MAAM,EAAC;AAApF;AAAR,OAAd,EADA,KAGA;AACA,YAAIW,CAAC,GAAC,KAAKlB,KAAL,CAAWC,CAAjB;AACAiB,QAAAA,CAAC,CAACwB,IAAI,CAACb,KAAL,CAAW,CAAX,CAAD,CAAD,CAAiBa,IAAI,CAACb,KAAL,CAAW,CAAX,CAAjB,IAAgCa,IAAI,CAACzB,IAArC;AACAe,QAAAA,QAAQ,CAACC,cAAT,CAAwBS,IAAI,CAACb,KAA7B,EAAoCK,SAApC,GAA8CQ,IAAI,CAACzB,IAAnD;AACI,aAAKkB,QAAL,CAAc;AAAClC,UAAAA,CAAC,EAACiB,CAAH;AAAKV,UAAAA,QAAQ,EAAC;AAAd,SAAd;AACP;AACL,KAhBD;AAiBF;;AAEDoC,EAAAA,oBAAoB,GAAE;AAClBjD,IAAAA,MAAM,CAACiC,IAAP,CAAY,oBAAZ,EAAiC;AAACE,MAAAA,IAAI,EAAC,KAAK/B,KAAL,CAAWgB,IAAX,CAAgBe,IAAtB;AAA2Be,MAAAA,MAAM,EAAC,KAAK9C,KAAL,CAAWgB,IAAX,CAAgBsB,EAAhB,CAAmBS;AAArD,KAAjC;AACH;;AAEDC,EAAAA,MAAM,GAAE;AACJlC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKd,KAAL,CAAWC,CAAvB;;AAEA,QAAG,KAAKD,KAAL,CAAWE,iBAAd,EAAgC;AAChC,UAAG,CAAC,KAAKF,KAAL,CAAWG,MAAX,CAAkBG,UAAtB,EAAiC;AAC7B,eACI;AAAK,UAAA,KAAK,EAAE;AAAC0C,YAAAA,SAAS,EAAC;AAAX,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAwB,KAAKjD,KAAL,CAAWgB,IAAX,CAAgBgB,UAAhB,CAA2BkB,IAAnD,CADA,EAEA;AAAO,UAAA,EAAE,EAAC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKvC,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,EAGI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHJ,CADJ,EAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,EAGI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHJ,CANJ,EAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,EAGI;AAAI,UAAA,EAAE,EAAC,IAAP;AAAW,UAAA,OAAO,EAAE,KAAKA,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHJ,CAXJ,CAFA,EAmBI;AAAI,UAAA,KAAK,EAAE;AAACwC,YAAAA,KAAK,EAAC;AAAP,WAAX;AAA4B,UAAA,MAAM,EAAE,CAAC,KAAKlD,KAAL,CAAWQ,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAnBJ,EAoBI;AAAI,UAAA,KAAK,EAAE;AAAC0C,YAAAA,KAAK,EAAC;AAAP,WAAX;AAA0B,UAAA,MAAM,EAAE,KAAKlD,KAAL,CAAWQ,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCApBJ,CADJ;AAwBH,OAzBD,MA0BI;AACA,YAAG,KAAKR,KAAL,CAAWG,MAAX,CAAkBI,MAArB,EAA4B;AACxB,iBACI;AAAK,YAAA,KAAK,EAAE;AAACyC,cAAAA,SAAS,EAAC;AAAX,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CADJ,CADJ;AAKH,SAND,MAQK,IAAG,KAAKhD,KAAL,CAAWG,MAAX,CAAkBC,MAAlB,CAAyB0C,OAAzB,KAAmC,KAAK/C,KAAL,CAAWgB,IAAX,CAAgBgB,UAAhB,CAA2Be,OAAjE,EAAyE;AAC1E,iBACI;AAAK,YAAA,KAAK,EAAE;AAACE,cAAAA,SAAS,EAAC;AAAX,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CADJ,CADJ;AAKH,SANI,MAOD;AACA,iBACI;AAAK,YAAA,KAAK,EAAE;AAACA,cAAAA,SAAS,EAAC;AAAX,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADJ,CADJ;AAKH;AACJ;AACJ,KAnDG,MAoDA;AACA,aACI;AAAK,QAAA,KAAK,EAAE;AAACA,UAAAA,SAAS,EAAC;AAAX,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CADJ,CADJ;AAKH;AACA;;AA/M4B;;AAmNjC,eAAepD,GAAf","sourcesContent":["import React from 'react';\nimport './tic.css';\n\nconst {socket}=require('../socket')\n\nclass TTT extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            a:null,\n            OpponentConnected:true,\n            Result:{Winner:'',Looser:'',isFinished:false,isDraw:false},\n            myChance:false,\n            hasClicked:false\n        };\n        this.clicked=this.clicked.bind(this);\n        this.hasWon=this.hasWon.bind(this);\n        this.isDraw=this.isDraw.bind(this);\n        console.log(this.props.info)\n    }\n\n    isDraw(id,sign){\n        var x=this.state.a;\n        x[id[0]][id[1]]=sign;\n        var flag=0;\n        for(var i=0;i<3;i++){\n            for(var j=0;j<3;j++)\n                if(x[i][j]===0)\n                    flag=1;\n        }\n        if(flag===1)\n            return false;\n        else\n            return true;\n    }\n\n    hasWon(id,sign){\n        return new Promise((resolve,reject)=>{\n            let i=id[0];\n            let j=id[1];\n            let x=this.state.a;\n            x[i][j]=sign;\n            var c=0;\n            for(c=0;c<3;c++){\n                if(x[i][c]!==sign)\n                    break;\n            }\n            if(c===3)\n                resolve(true);\n            for(c=0;c<3;c++){\n                if(x[c][j]!==sign)\n                    break;\n            }\n            if(c===3)\n            resolve(true);\n            for(c=0;c<3;c++){\n                if(x[c][c]!==sign)\n                    break;\n            }\n\n            if(c===3)\n                resolve(true);\n            for(c=0;c<3;c++){\n                if(x[c][2-c]!==sign)\n                    break;\n            }\n            if(c===3)\n                resolve(true);\n            resolve(false);\n        })\n        \n    }\n    \n\n    async clicked(event){\n        var id=event.target.id;\n        if(this.state.myChance){\n                var x=this.state.a;\n                console.log(x);\n                if(x[event.target.id[0]][event.target.id[1]]===0){\n                    if(this.props.info.sign==='x')\n                        socket.emit('MoveByMe',{block:event.target.id,room:this.props.info.room,Challenger:this.props.info.Challenger,sign:'x'});\n                    else\n                        socket.emit('MoveByMe',{block:event.target.id,room:this.props.info.room,Challenger:this.props.info.Challenger,sign:'o'});\n                    let x=this.state.a;\n                    x[event.target.id[0]][event.target.id[1]]=this.props.info.sign;\n                    document.getElementById(event.target.id).innerHTML=this.props.info.sign;\n                    this.setState({a:x,myChance:false});\n                    let result=await this.hasWon(event.target.id,this.props.info.sign);\n                    console.log(result);\n                    if(result)\n                        this.setState({Result:{Winner:this.props.info.me,Looser:this.props.info.Challenger,isFinished:true,isDraw:false}});\n                    let r1=await this.isDraw(id,this.props.info.sign);\n                    if(r1){\n                        this.setState({Result:{Winner:'',Looser:'',isFinished:true,isDraw:true}})\n                    }\n\n                }\n                else\n                    alert('Place is already Occupied!');\n        }\n        else\n            alert('Its your opponents turns!');\n    }\n\n    componentDidMount(){\n        socket.emit('InGame',{room:this.props.info.sign});\n        socket.on('OppoDeactive',data=>{\n            console.log(\"data\");\n            this.setState({OpponentConnected:false})\n        })\n        socket.on('OpponentActive',data=>{\n            console.log(\"data\");\n\n            this.setState({OpponentConnected:true})\n        })\n\n       var x=new Array(3);\n       for(var i=0;i<3;i++){\n           x[i]=new Array(3);\n           for(var j=0;j<3;j++)\n                x[i][j]=0\n       }\n       if(this.props.info.sign==='x')\n            this.setState({myChance:true});\n       this.setState({a:x})\n       console.log(this.props.info);\n       socket.on('MoveFromOpp',async data=>{\n        //    console.log(data);\n           let result=await this.hasWon(data.block,data.sign);\n            console.log(result);\n            let r1=await this.isDraw(data.block,data.sign);\n            if(r1)\n                this.setState({Result:{Winner:'',Looser:'',isFinished:true,isDraw:true}});\n           else if(result)\n                this.setState({Result:{Winner:this.props.info.Challenger,Looser:this.props.info.me,isFinished:true,isDraw:false}});\n            \n            else{\n                let x=this.state.a;\n                x[data.block[0]][data.block[1]]=data.sign;\n                document.getElementById(data.block).innerHTML=data.sign;\n                    this.setState({a:x,myChance:true});\n            }\n       });\n    }\n\n    componentWillUnmount(){\n        socket.emit('DisconnectFromGame',{room:this.props.info.room,userId:this.props.info.me.user_id})\n    }\n\n    render(){\n        console.log(this.state.a);\n\n        if(this.state.OpponentConnected){\n        if(!this.state.Result.isFinished){\n            return(\n                <div style={{textAlign:'center'}}>\n                <h5>You are up against {this.props.info.Challenger.name}</h5>\n                <table id=\"board\">\n                    <tr>\n                        <td id=\"00\"onClick={this.clicked}></td>\n                        <td id=\"01\"onClick={this.clicked}></td>\n                        <td id=\"02\"onClick={this.clicked}></td>\n                    </tr>\n                    <tr>\n                        <td id=\"10\"onClick={this.clicked}></td>\n                        <td id=\"11\"onClick={this.clicked}></td>\n                        <td id=\"12\"onClick={this.clicked}></td>\n                    </tr>\n                    <tr >\n                        <td id=\"20\"onClick={this.clicked}></td>\n                        <td id=\"21\"onClick={this.clicked}></td>\n                        <td id=\"22\"onClick={this.clicked}></td>\n                    </tr>\n                    </table>\n                    <h3 style={{color:'green'}} hidden={!this.state.myChance}>Your Chance</h3>\n                    <h3 style={{color:'red'}} hidden={this.state.myChance}>Your Opponents turn</h3>\n                </div>\n            )\n        }\n        else{\n            if(this.state.Result.isDraw){\n                return(\n                    <div style={{textAlign:'center'}}>\n                        <h1>Well played! You had a draw</h1>\n                    </div>\n                )\n            }\n\n            else if(this.state.Result.Winner.user_id===this.props.info.Challenger.user_id){\n                return(\n                    <div style={{textAlign:false}}>\n                        <h1>Better Luck Next Time brother!</h1>\n                    </div>\n                )\n            }\n            else{\n                return(\n                    <div style={{textAlign:false}}>\n                        <h1>Congrats bro you won!</h1>\n                    </div>\n                )\n            }\n        }\n    }\n    else{\n        return(\n            <div style={{textAlign:'center'}}>\n                <h1>Your Opponent has fled the arena!</h1>\n            </div>\n        )\n    }\n    }\n}\n\n\nexport default TTT"]},"metadata":{},"sourceType":"module"}