{"ast":null,"code":"var _jsxFileName = \"/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/Tictactoe.jsx\";\nimport React from 'react';\nimport Axios from 'axios';\nimport { Button } from 'react-materialize';\nimport TTT from './TTT';\n\nconst _require = require('../socket'),\n      ConnectUser = _require.ConnectUser,\n      getOnlineUsers = _require.getOnlineUsers,\n      disconnectSocket = _require.disconnectSocket,\n      socket = _require.socket;\n\nconst _require2 = require('../url'),\n      backendURL = _require2.backendURL;\n\nclass Tictactoe extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOkay: false,\n      users: [],\n      ioId: '',\n      game: {\n        isBusy: false,\n        Challenger: null,\n        me: null,\n        sign: '',\n        room: ''\n      },\n      startTimer: false\n    };\n    this.challenge = this.challenge.bind(this);\n  }\n\n  challenge(user) {\n    console.log(user);\n    socket.emit('Challenge', {\n      user,\n      userId: this.state.ioId\n    });\n  }\n\n  componentDidMount() {\n    Axios.get(\"\".concat(backendURL, \"/isLoggedIn\"), {\n      withCredentials: true\n    }).then(res => {\n      this.setState({\n        ioId: res.data.userId\n      });\n    });\n    socket.on('OnlineUsers', data => {\n      this.setState({\n        users: data.users\n      });\n    });\n    socket.on('ChallengeRequest', data => {\n      console.log(data);\n\n      if (window.confirm(\"\".concat(data.Challenger.name, \" is trying to challeneg,Do you accept?\"))) {\n        socket.emit('ChallengeAccepted', data);\n      } else socket.emit('ChallengeRejected', data);\n    });\n    socket.on('AcceptedChallenge', data => {\n      console.log(data);\n      let room = data.data.Challenger.user_id.slice(data.data.Challenger.user_id.length - 4, data.data.Challenger.user_id.length) + data.data.Challenged.user_id.slice(data.data.Challenged.user_id.length - 4, data.data.Challenged.user_id.length);\n      socket.emit('JoinAccepted', room);\n      var me;\n      var Challenger;\n\n      if (data.data.Challenged.user_id === this.state.ioId) {\n        me = data.data.Challenged;\n        Challenger = data.data.Challenger;\n      } else {\n        me = data.data.Challenger;\n        Challenger = data.data.Challenged;\n      }\n\n      let game = {\n        isBusy: true,\n        Challenger: Challenger,\n        me: me,\n        sign: data.sign,\n        room: room\n      };\n      this.setState({\n        game: game\n      });\n      socket.emit('IntoGame', room);\n    });\n    socket.on('RejectedChallenge', data => console.log(\"Challenege Rejected \" + data));\n    console.log(this.props.match.params);\n    if (this.props.match.params.game === 'tictactoe') this.setState({\n      isOkay: true\n    });\n    ConnectUser();\n    getOnlineUsers();\n  }\n\n  componentWillUnmount() {\n    disconnectSocket();\n  }\n\n  render() {\n    // console.log(this.state);\n    let connections = [];\n    if (this.state.users.length === 0) connections = React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"\\\"No one is online\\\"\");else {\n      const x = this.state.users.filter(i => {\n        if (i.user_id !== this.state.ioId) return i;\n      }); // console.log(connections)\n\n      connections = x.map(i => {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, i.name), React.createElement(Button, {\n          onClick: () => {\n            this.challenge(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"challenge\"));\n      });\n    }\n\n    if (this.state.isOkay) {\n      if (!this.state.game.isBusy) {\n        return React.createElement(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, connections);\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(TTT, {\n          info: this.state.game,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }));\n      }\n    } else {\n      return React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Work is in developement\"));\n    }\n  }\n\n}\n\nexport default Tictactoe;","map":{"version":3,"sources":["/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/Tictactoe.jsx"],"names":["React","Axios","Button","TTT","require","ConnectUser","getOnlineUsers","disconnectSocket","socket","backendURL","Tictactoe","Component","constructor","props","state","isOkay","users","ioId","game","isBusy","Challenger","me","sign","room","startTimer","challenge","bind","user","console","log","emit","userId","componentDidMount","get","withCredentials","then","res","setState","data","on","window","confirm","name","user_id","slice","length","Challenged","match","params","componentWillUnmount","render","connections","x","filter","i","map","textAlign"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Axios from 'axios';\nimport {Button} from 'react-materialize'\nimport TTT from './TTT';\n\nconst {ConnectUser,getOnlineUsers,disconnectSocket,socket}=require('../socket');\nconst {backendURL}=require('../url');\n\n\nclass Tictactoe extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            isOkay:false,\n            users:[],\n            ioId:'',\n            game:{isBusy:false,Challenger:null,me:null,sign:'',room:''},\n            startTimer:false\n        };\n\n        this.challenge=this.challenge.bind(this);\n    }\n\n    challenge(user){\n        console.log(user);\n        socket.emit('Challenge',{user,userId:this.state.ioId});\n    }\n\n    componentDidMount(){\n        Axios.get(`${backendURL}/isLoggedIn`,{withCredentials:true}).then(res=>{\n            this.setState({ioId:res.data.userId});\n        });\n        socket.on('OnlineUsers',data=>{this.setState({users:data.users})});\n        socket.on('ChallengeRequest',data=>{\n            console.log(data);\n            if(window.confirm(`${data.Challenger.name} is trying to challeneg,Do you accept?`)){\n                socket.emit('ChallengeAccepted',data);\n            }\n            else\n                socket.emit('ChallengeRejected',data);\n        });\n        socket.on('AcceptedChallenge',data=>{\n            console.log(data);\n            let room=data.data.Challenger.user_id.slice(data.data.Challenger.user_id.length-4,data.data.Challenger.user_id.length)+\n                     data.data.Challenged.user_id.slice(data.data.Challenged.user_id.length-4,data.data.Challenged.user_id.length);\n            socket.emit('JoinAccepted',room);\n            var me;var Challenger;\n            if(data.data.Challenged.user_id===this.state.ioId){\n                me=data.data.Challenged;\n                Challenger=data.data.Challenger;\n            }\n            else{\n                me=data.data.Challenger;\n                Challenger=data.data.Challenged;\n            }\n            let game={isBusy:true,Challenger:Challenger,me:me,sign:data.sign,room:room}\n            this.setState({game:game});\n            socket.emit('IntoGame',room);\n        });\n        socket.on('RejectedChallenge',data=>console.log(\"Challenege Rejected \"+data))\n        console.log(this.props.match.params);\n        if(this.props.match.params.game==='tictactoe')\n            this.setState({isOkay:true});\n        \n            ConnectUser();\n        getOnlineUsers();\n    }\n    componentWillUnmount(){\n        disconnectSocket();\n    }\n\n    render(){\n        // console.log(this.state);\n        let connections=[];\n        if(this.state.users.length===0)\n            connections=<h4>\"No one is online\"</h4>;\n        else{\n            const x=this.state.users.filter(i=>{\n               if(i.user_id!==this.state.ioId)\n                    return(\n                       i\n                    )\n            });\n            // console.log(connections)\n            connections=x.map(i=>{\n                return(<div>\n                    <h1>{i.name}</h1>\n                    <Button onClick={()=>{this.challenge(i)}}>challenge</Button>\n                </div>);\n            })\n        }\n        if(this.state.isOkay){\n            if(!this.state.game.isBusy){\n                return(\n                    <div style={{textAlign:'center'}}>\n                        {connections}\n                    </div>\n                )\n            }\n            else{\n               return(\n                <div>\n                    <TTT info={this.state.game}/>\n                </div>\n               )\n            }\n    }\n    else{\n        return(\n            <div style={{textAlign:'center'}}>\n                <h1>Work is in developement</h1>\n            </div>\n        );\n    }\n}\n    \n}\n\nexport default Tictactoe;"]},"metadata":{},"sourceType":"module"}