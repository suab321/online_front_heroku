{"ast":null,"code":"var _jsxFileName = \"/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/Tictactoe.jsx\";\nimport React from 'react';\nimport Axios from 'axios';\nimport { Button } from 'react-materialize';\nimport TICTACTOE from './TICTACTOE';\n\nconst _require = require('../socket'),\n      ConnectUser = _require.ConnectUser,\n      getOnlineUsers = _require.getOnlineUsers,\n      disconnectSocket = _require.disconnectSocket,\n      socket = _require.socket;\n\nconst _require2 = require('../url'),\n      backendURL = _require2.backendURL;\n\nclass Tictactoe extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOkay: false,\n      users: [],\n      ioId: '',\n      game: {\n        isBusy: false,\n        Challenger: null\n      }\n    };\n    this.challenge = this.challenge.bind(this);\n  }\n\n  challenge(user) {\n    console.log(user);\n    socket.emit('Challenge', {\n      user,\n      userId: this.state.ioId\n    });\n  }\n\n  async componentDidMount() {\n    Axios.get(\"\".concat(backendURL, \"/isLoggedIn\"), {\n      withCredentials: true\n    }).then(res => {\n      this.setState({\n        ioId: res.data.userId\n      });\n    });\n    socket.on('OnlineUsers', data => {\n      this.setState({\n        users: data.users\n      });\n    });\n    socket.on('ChallengeRequest', data => {\n      console.log(data);\n\n      if (window.confirm(\"\".concat(data.Challenger.name, \" is trying to challeneg,Do you accept?\"))) {\n        socket.emit('ChallengeAccepted', data);\n      } else socket.emit('ChallengeRejected', data);\n    });\n    socket.on('AcceptedChallenge', data => {\n      console.log(data);\n      let room = data.Challenger.user_id.slice(data.Challenger.user_id.length - 4, data.Challenger.user_id.length) + data.Challenged.user_id.slice(data.Challenged.user_id.length - 4, data.Challenged.user_id.length);\n      socket.emit('JoinAccepted', room);\n      let game = {\n        isBusy: true,\n        Challenger: data.Challenger\n      };\n      this.setState({\n        game: game\n      });\n    });\n    socket.on('RejectedChallenge', data => console.log(\"Challenege Rejected \" + data));\n    console.log(this.props.match.params);\n    if (this.props.match.params.game === 'tictactoe') this.setState({\n      isOkay: true\n    });\n    ConnectUser();\n    getOnlineUsers();\n  }\n\n  componentWillUnmount() {\n    disconnectSocket();\n  }\n\n  render() {\n    // console.log(this.state);\n    let connections = [];\n    if (this.state.users.length === 0) connections = React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"\\\"No one is online\\\"\");else {\n      const x = this.state.users.filter(i => {\n        if (i.user_id !== this.state.ioId) return i;\n      }); // console.log(connections)\n\n      connections = x.map(i => {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, i.name), React.createElement(Button, {\n          onClick: () => {\n            this.challenge(i);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"challenge\"));\n      });\n    }\n\n    if (this.state.isOkay) {\n      if (!this.state.game.isBusy) {\n        return React.createElement(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, connections);\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(TICTACTOE, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }));\n      }\n    } else {\n      return React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Work is in developement\"));\n    }\n  }\n\n}\n\nexport default Tictactoe;","map":{"version":3,"sources":["/home/abhinav/Learning_file_2/online_multiplayer_game/frontend/src/components/Tictactoe.jsx"],"names":["React","Axios","Button","TICTACTOE","require","ConnectUser","getOnlineUsers","disconnectSocket","socket","backendURL","Tictactoe","Component","constructor","props","state","isOkay","users","ioId","game","isBusy","Challenger","challenge","bind","user","console","log","emit","userId","componentDidMount","get","withCredentials","then","res","setState","data","on","window","confirm","name","room","user_id","slice","length","Challenged","match","params","componentWillUnmount","render","connections","x","filter","i","map","textAlign"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Axios from 'axios';\nimport {Button} from 'react-materialize'\nimport TICTACTOE from './TICTACTOE';\n\nconst {ConnectUser,getOnlineUsers,disconnectSocket,socket}=require('../socket');\nconst {backendURL}=require('../url');\n\n\nclass Tictactoe extends React.Component{\n    constructor(props){\n        super(props);\n        this.state={\n            isOkay:false,\n            users:[],\n            ioId:'',\n            game:{isBusy:false,Challenger:null}\n        };\n\n        this.challenge=this.challenge.bind(this);\n    }\n\n    challenge(user){\n        console.log(user);\n        socket.emit('Challenge',{user,userId:this.state.ioId});\n    }\n\n    async componentDidMount(){\n        Axios.get(`${backendURL}/isLoggedIn`,{withCredentials:true}).then(res=>{\n            this.setState({ioId:res.data.userId});\n        })\n        socket.on('OnlineUsers',data=>{this.setState({users:data.users})});\n        socket.on('ChallengeRequest',data=>{\n            console.log(data);\n            if(window.confirm(`${data.Challenger.name} is trying to challeneg,Do you accept?`)){\n                socket.emit('ChallengeAccepted',data);\n            }\n            else\n                socket.emit('ChallengeRejected',data);\n        });\n        socket.on('AcceptedChallenge',data=>{\n            console.log(data);\n            let room=data.Challenger.user_id.slice(data.Challenger.user_id.length-4,data.Challenger.user_id.length)+\n                     data.Challenged.user_id.slice(data.Challenged.user_id.length-4,data.Challenged.user_id.length);\n            socket.emit('JoinAccepted',room);\n            let game={isBusy:true,Challenger:data.Challenger}\n            this.setState({game:game});\n        });\n        socket.on('RejectedChallenge',data=>console.log(\"Challenege Rejected \"+data))\n        console.log(this.props.match.params);\n        if(this.props.match.params.game==='tictactoe')\n            this.setState({isOkay:true});\n        ConnectUser();\n        getOnlineUsers();\n    }\n    componentWillUnmount(){\n        disconnectSocket();\n    }\n\n    render(){\n        // console.log(this.state);\n        let connections=[];\n        if(this.state.users.length===0)\n            connections=<h4>\"No one is online\"</h4>;\n        else{\n            const x=this.state.users.filter(i=>{\n               if(i.user_id!==this.state.ioId)\n                    return(\n                       i\n                    )\n            });\n            // console.log(connections)\n            connections=x.map(i=>{\n                return(<div>\n                    <h1>{i.name}</h1>\n                    <Button onClick={()=>{this.challenge(i)}}>challenge</Button>\n                </div>);\n            })\n        }\n        if(this.state.isOkay){\n            if(!this.state.game.isBusy){\n                return(\n                    <div style={{textAlign:'center'}}>\n                        {connections}\n                    </div>\n                )\n            }\n            else{\n               return(\n                <div>\n                    <TICTACTOE/>\n                </div>\n               )\n            }\n    }\n    else{\n        return(\n            <div style={{textAlign:'center'}}>\n                <h1>Work is in developement</h1>\n            </div>\n        );\n    }\n}\n    \n}\n\nexport default Tictactoe;"]},"metadata":{},"sourceType":"module"}